# First fetch and build boost using libc++
# We expect this libc++ boost to be installed at '/opt/local/libcpp-software'

mkdir tmp
cd tmp
wget http://sourceforge.net/projects/boost/files/boost/1.55.0/boost_1_55_0.tar.gz
tar -zxvf boost_1_55_0.tar.gz
cd boost_1_55_0
./bootstrap.sh --prefix=/opt/local/libcpp-software
sudo ./b2 toolset=clang cxxflags="-stdlib=libc++" linkflags="-stdlib=libc++" --layout=tagged  install
cd ../../
rm -fr tmp

# Second, build the dependent libraries included in the 'ext' directory
# These are the 'leveldb' and the 'libspatialindex' libraries

## Enter into the external software dir
cd ext/src

## Build leveldb
cd leveldb
CC=clang CXX=clang++ make -j 4
cd ..

## Build libspatialindex
cd libspatialindex
CC=clang CXX=clang++ ./configure --prefix $(cd ../..; pwd)
make -j 4
make install
cd ..

## Go back to the top level
cd ../..

# Third, build libintergdb
cd libintergdb
make -j 4
cd ..

# Last, run a test application
cd test/SimpleTest
make
./bin/SimpleTest 







